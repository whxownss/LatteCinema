<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Member">

<!-- 	<select id="select" parameterType="map" resultType="MemberDTO"> -->
<!-- 		SELECT IDX -->
<!-- 			 , ID -->
<!-- 			 , NAME -->
<!-- 			 , PHONE -->
<!-- 			 , ADDRESS -->
<!-- 			 , E_MAIL -->
<!-- 			 , JUMIN -->
<!-- 		  FROM MEMBERS -->
<!-- 		 WHERE 1=1 -->
<!-- 		<if test="!ID.equals('') and ID != null"> -->
<!-- 		   AND ID LIKE CONCAT('%', #{ID}, '%')	   -->
<!-- 		</if> -->
<!-- 		<if test="!NAME.equals('') and NAME != null"> -->
<!-- 		   AND NAME LIKE CONCAT('%', #{NAME}, '%')	   -->
<!-- 		</if> -->
<!-- 		<if test="!PHONE.equals('') and PHONE != null"> -->
<!-- 		   AND PHONE LIKE CONCAT('%', #{PHONE}, '%') 	   -->
<!-- 		</if> -->
<!-- 		<if test="!ADDRESS.equals('') and ADDRESS != null"> -->
<!-- 		   AND ADDRESS LIKE CONCAT('%', #{ADDRESS}, '%') 	   -->
<!-- 		</if> -->
<!-- 		<if test="!BIRTH.equals('') and BIRTH != null"> -->
<!-- 		   AND BIRTH LIKE CONCAT('%', #{BIRTH}, '%')  	   -->
<!-- 		</if> -->
<!-- 		<if test="!E_MAIL.equals('') and E_MAIL != null"> -->
<!-- 		   AND E_MAIL = #{E_MAIL}	   -->
<!-- 		</if> -->
<!-- 	</select> -->

	<insert id="insertMember" parameterType="MemberDTO">
		INSERT INTO MEMBERS
		 	 ( MEM_IDX
		 	 , MEM_ID
		 	 , MEM_PASS
		 	 , MEM_NAME
		 	 , MEM_PHONE
		 	 , MEM_JOIN_D
		 	 , MEM_EMAIL  
		 	 , MEM_BIRTH_D
		 	 , MEM_ADDRESS)
		VALUES (
				(SELECT *
				  FROM (SELECT IFNULL(MAX(CAST(MEM_IDX as unsigned)), 0) + 1
						  FROM MEMBERS) A)
			 , #{memId}
			 , #{memPass}
			 , #{memName}
			 , #{memPhone}
			 , #{memJoinD}
			 , #{memEmail}
			 , #{memBirthD}
			 , #{memAddress})
	</insert>
	
	<select id="userCheck" parameterType="MemberDTO" resultType="MemberDTO">
		SELECT *
		FROM MEMBERS
		WHERE MEM_ID = #{memId}
		AND   MEM_PASS = #{memPass}	
		
	</select>
	
	
	<delete id="deleteMember" parameterType="MemberDTO">
		DELETE FROM MEMBERS
		 WHERE MEM_ID = #{memId}
	</delete>
	
	
	
<!-- 	<delete id="delete"> -->
<!-- 		DELETE FROM MEMBERS -->
<!-- 		 WHERE IDX = #{idx} -->
<!-- 	</delete> -->
	
	
	
	
	
	
	
</mapper>